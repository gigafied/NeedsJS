/*
 * needs.js v0.0.1
 * http://minion.org
 *
 * (c) 2012, Taka Kojima (taka@gigafied.com)
 * Licensed under the MIT License
 *
 * Date: Wed Feb 22 03:24:07 2012 -0800
 */
 (function(a){function j(a){return a instanceof Array}function k(a){return typeof a=="object"}function l(a){return typeof a=="function"}function m(a){return j(a)?a:[a]}function n(a){return setTimeout(a,0)}function o(a){a=a.replace(/(?:^|[^\.])(\.\/)/g,"/");var b="";while(b!==a)b=a,a=a.replace(/([\w,\-]*[\/]{1,})([\.]{2,}\/)/g,"/");return a=a.replace(/(\/{2,})/g,"/"),a}function p(a){return a.substr(a.lastIndexOf("/")+1)}function q(a){return a?a.substr(0,a.lastIndexOf("/")):a}function r(a,b){return b=b||h,o(b+"/"+a)}function s(b,c,e,f,g){f={};for(b=0;b<d.length;b++){g=!0,f=d[b];for(c=f.m.length-1;c>=0;c--)if(!w(f.m[c])){g=!1;break}g&&(d.splice(b,1),b--,f.cb&&(f.cb.apply(a,w(f.m)),f.cb=null))}}function t(a,b,c,d,e,g){c=c||0,d=document;if(!d.body||c){setTimeout(function(){t(a,b)},c);return}g=d.createElement("script"),g.async=!0,e={f:a,m:b,e:0,s:g},g.onreadystatechange=g.onload=function(c){function d(){f={i:b,p:a}}g.onload=g.onreadystatechange=g.onerror=null,f?d():n(d)},g.onerror=function(b){throw g.onload=g.onreadystatechange=g.onerror=null,Error(a+" failed to load.")},g.src=a,(d.head||d.body).appendChild(g)}function u(a,b){d.push(a);for(b=0;b<a.f.length;b++)c?(f={p:a.f[b],i:a.m[b]},A(a.f[b])):e.indexOf(a.f[b])<0&&(e.push(a.f[b]),t(a.f[b],a.m[b],(b+1)*5))}function v(a,b,c,d,e,f){c=g;if(!a)return!1;f=a.split("/");for(d=0,e=f.length;d<e;d++){if(!c[f[d]]){if(!b)return!1;c[f[d]]=d===e-1?b:{}}c=c[f[d]]}return c}"use strict",Array.prototype.indexOf=Array.prototype.indexOf||function(a,b,c,d){for(b=this,c=b.length,d=-1;~c;d=b[--c]===a?c:d);return d};var b=[],c=typeof window=="undefined",d=[],e=[],f=null,g={},h="",i="",w=function(a,b){if(!j(a))return v(a,!1);var c=[];for(b=0;b<a.length;b++)c[b]=w(a[b]);return c},x=function(a){return b[a]?b[a]:a.indexOf("*")>-1?a.replace("/*",""):a+".js"+i},y=function(a,c,d){c=m(c);for(d=c.length-1;d>=0;d--)b[c[d]]=a},z=function(){function e(g,h,i){if(!a&&!f){n(e);return}g=f?f.i:null,h=f?f.p:null,f=null,b=b||[],a=a||g;if(b.length>0){A(b,function(){z(a,c,null,Array.prototype.slice.call(arguments,0))},h);return}l(c)&&(c=c.apply(c,d[3]||[])),v(a,c),s()}var a,b,c,d=Array.prototype.slice.call(arguments,0);if(d.length===1)c=d[0];else if(d.length===2||d[2]===null)c=d[1],j(d[0])?b=d[0]:(a=d[0],c=d[1]);else{if(d.length!==3)throw Error("Invalid call to define(), expected 3 arguments, got "+d.length);a=d[0],b=d[1],c=d[2]}e()},A=function(b,c,d){b=m(b);var e=[],f=[],g=[],h=!0,i,j,k,l,o;for(i=0;i<b.length;i++)j=r(b[i],q(d)),k=w(j),k?g.push(k):(h=!1,l=x(j),f.push(j),e.push(l));if(!h){o={f:e,m:f,cb:c},n(function(){u(o)});return}c.apply(a,g)};A.configure=function(a){a=a||{},h=a.rootPath||h,i="?"+a.fileSuffix||i;if(a.paths)for(var b in a.paths)y(b,a.paths[b])},c&&(module.exports={require:A,define:z}),a.require&&A.configure(a.require),a.define=z,a.require=A})(this);

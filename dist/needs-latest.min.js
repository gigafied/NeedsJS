/*
 * needs.js v0.0.1
 * http://minion.org
 *
 * (c) 2012, Taka Kojima (taka@gigafied.com)
 * Licensed under the MIT License
 *
 * Date: Wed Feb 22 15:25:36 2012 -0800
 */
 (function(){function i(a){return a instanceof Array}function j(a){return i(a)?a:[a]}function k(a){a=a.replace(/(?:^|[^\.])(\.\/)/g,"/");var b="";while(b!==a)b=a,a=a.replace(/([\w,\-]*[\/]{1,})([\.]{2,}\/)/g,"/");return a=a.replace(/(\/{2,})/g,"/"),a}function l(a){return a?a.substr(0,a.lastIndexOf("/")):a}function m(a,b){return b=b||f,k(b+"/"+a)}function n(b,c,d,e,f){e={};for(b=0;b<a.length;b++){f=1,e=a[b];for(c=e.m.length-1;c>=0;c--)if(!r(e.m[c])){f=0;break}f&&(a.splice(b,1),b--,e.cb&&e.cb.apply(h,r(e.m)))}}function o(a,c,d,f,g,i,j){e||(e=document.head||document.getElementsByTagName("head")[0]),i=document.createElement("script"),i.async=!0,i.src=a,i.onreadystatechange=i.onload=function(){i.onload=i.onreadystatechange=i.onerror=null,j=b.splice(b.length-1,1)[0],j.unshift(c),t.apply(h,j)},i.onerror=function(b){throw i.onload=i.onreadystatechange=i.onerror=null,Error(a+" failed to load.")},e.insertBefore(i,e.firstChild)}function p(b,d){a.push(b);for(d=0;d<b.f.length;d++)c.indexOf(b.f[d])<0&&(c.push(b.f[d]),o(b.f[d],b.m[d]))}function q(a,b,c,e,f,g){c=d;if(!a)return!1;g=a.split("/");for(e=0,f=g.length;e<f;e++){if(!c[g[e]]){if(!b)return!1;c[g[e]]=e===f-1?b:{}}c=c[g[e]]}return c}"use strict",Array.prototype.indexOf=Array.prototype.indexOf||function(a,b,c,d){for(b=this,c=b.length,d=-1;~c;d=b[--c]===a?c:d);return d};var a=[],b=[],c=[],d={},e,f="",g="",h=typeof window!="undefined"?window:module.exports,r=function(a,b){if(!i(a))return q(a);var c=[];for(b=0;b<a.length;b++)c[b]=r(a[b]);return c},s=function(a){return a.indexOf("*")>-1?a.replace("/*",""):a+".js"+g},t=function(){var a,c,d,e,f=Array.prototype.slice.call(arguments,0);if(f.length===1)d=f[0];else if(f.length===2||f[2]===null)d=f[1],i(f[0])?c=f[0]:(a=f[0],d=f[1]);else{if(f.length!==3)throw Error("Invalid call to define()");a=f[0],c=f[1],d=f[2]}if(!a){b.push(f);return}c=c||[];if(c.length>0){u(c,function(){t(a,d,null,arguments)},s(a));return}typeof d=="function"&&(d=d.apply(d,f[3]||[])),q(a,d),n()},u=function(a,b,c){if(!b)return r(a);a=j(a);var d=[],e=[],f=[],g,i,k,n,o;for(g=0;g<a.length;g++)i=m(a[g],l(c)),k=r(i),k?f.push(k):(n=s(i),e.push(i),d.push(n));if(e.length>0){p({f:d,m:e,cb:b});return}b.apply(h,f)};u.configure=function(a){a=a||{},f=a.rootPath||f,g=a.fileSuffix?"?"+a.fileSuffix:g},h.require&&u.configure(h.require),h.define=t,h.require=u})();

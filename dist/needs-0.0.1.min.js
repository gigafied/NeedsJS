/*
 * needs.js v0.0.1
 * http://minion.org
 *
 * (c) 2012, Taka Kojima (taka@gigafied.com)
 * Licensed under the MIT License
 *
 * Date: Wed Feb 22 04:12:33 2012 -0800
 */
 (function(a){function j(a){return a instanceof Array}function k(a){return typeof a=="object"}function l(a){return typeof a=="function"}function m(a){return j(a)?a:[a]}function n(a){return setTimeout(a,0)}function o(a){a=a.replace(/(?:^|[^\.])(\.\/)/g,"/");var b="";while(b!==a)b=a,a=a.replace(/([\w,\-]*[\/]{1,})([\.]{2,}\/)/g,"/");return a=a.replace(/(\/{2,})/g,"/"),a}function p(a){return a?a.substr(0,a.lastIndexOf("/")):a}function q(a,b){return b=b||h,o(b+"/"+a)}function r(b,c,e,f,g){f={};for(b=0;b<d.length;b++){g=!0,f=d[b];for(c=f.m.length-1;c>=0;c--)if(!v(f.m[c])){g=!1;break}g&&(d.splice(b,1),b--,f.cb&&(f.cb.apply(a,v(f.m)),f.cb=null))}}function s(a,b,c,d,e,g){c=c||0,d=document;if(!d.body||c){setTimeout(function(){s(a,b)},c);return}g=d.createElement("script"),g.async=!0,e={f:a,m:b,e:0,s:g},g.onreadystatechange=g.onload=function(c){function d(){f={i:b,p:a}}g.onload=g.onreadystatechange=g.onerror=null,f?d():n(d)},g.onerror=function(b){throw g.onload=g.onreadystatechange=g.onerror=null,Error(a+" failed to load.")},g.src=a,(d.head||d.body).appendChild(g)}function t(a,b){d.push(a);for(b=0;b<a.f.length;b++)c?(f={p:a.f[b],i:a.m[b]},z(a.f[b])):e.indexOf(a.f[b])<0&&(e.push(a.f[b]),s(a.f[b],a.m[b],(b+1)*5))}function u(a,b,c,d,e,f){c=g;if(!a)return!1;f=a.split("/");for(d=0,e=f.length;d<e;d++){if(!c[f[d]]){if(!b)return!1;c[f[d]]=d===e-1?b:{}}c=c[f[d]]}return c}"use strict",Array.prototype.indexOf=Array.prototype.indexOf||function(a,b,c,d){for(b=this,c=b.length,d=-1;~c;d=b[--c]===a?c:d);return d};var b=[],c=typeof window=="undefined",d=[],e=[],f=null,g={},h="",i="",v=function(a,b){if(!j(a))return u(a);var c=[];for(b=0;b<a.length;b++)c[b]=v(a[b]);return c},w=function(a){return b[a]?b[a]:a.indexOf("*")>-1?a.replace("/*",""):a+".js"+i},x=function(a,c,d){c=m(c);for(d=c.length-1;d>=0;d--)b[c[d]]=a},y=function(){function e(g,h,i){if(!a&&!f){n(e);return}g=f?f.i:null,h=f?f.p:null,f=null,b=b||[],a=a||g;if(b.length>0){z(b,function(){y(a,c,null,arguments)},h);return}l(c)&&(c=c.apply(c,d[3]||[])),u(a,c),r()}var a,b,c,d=Array.prototype.slice.call(arguments,0);if(d.length===1)c=d[0];else if(d.length===2||d[2]===null)c=d[1],j(d[0])?b=d[0]:(a=d[0],c=d[1]);else{if(d.length!==3)throw Error("Invalid call to define(), expected 3 arguments, got "+d.length);a=d[0],b=d[1],c=d[2]}e()},z=function(b,c,d){b=m(b);var e=[],f=[],g=[],h=!0,i,j,k,l,n;for(i=0;i<b.length;i++)j=q(b[i],p(d)),k=v(j),k?g.push(k):(h=!1,l=w(j),f.push(j),e.push(l));if(!h){n={f:e,m:f,cb:c},t(n);return}c.apply(a,g)};z.configure=function(a){a=a||{},h=a.rootPath||h,i=a.fileSuffix?"?"+a.fileSuffix:i;if(a.paths)for(var b in a.paths)x(b,a.paths[b])},c&&(module.exports={require:z,define:y}),a.require&&z.configure(a.require),a.define=y,a.require=z})(this);

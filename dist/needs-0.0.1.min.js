/*
 * needs.js v0.0.1
 * http://minion.org
 *
 * (c) 2012, Taka Kojima (taka@gigafied.com)
 * Licensed under the MIT License
 *
 * Date: Tue Feb 21 19:54:51 2012 -0800
 */
 (function(a){function m(a){return a instanceof Array}function n(a){return typeof a=="object"}function o(a){return typeof a=="function"}function p(a){return m(a)?a:[a]}function q(a){return setTimeout(a,0)}function r(a){a=a.replace(/(?:^|[^\.])(\.\/)/g,"/");var b="";while(b!==a)b=a,a=a.replace(/([\w,\-]*[\/]{1,})([\.]{2,}\/)/g,"/");return a=a.replace(/(\/{2,})/g,"/"),a}function s(a){return a.substr(0,a.lastIndexOf(z.separator))}function t(a,b){return b=b||z.rootPath,r([b,a].join("/"))}function u(){var b,c,e,f,g;e={},f={},g=[];for(b=d.length-1;b>=0;b--){e=d[b];for(c=e.m.length-1;c>=0;c--)if(!z.get(e.m[c])){q(u);return}e.cb&&e.cb.apply(a,z.get(e.m)),d.splice(b,1)}}function v(){var a=f,b,c;clearTimeout(e);for(b=0;b<a.length;b+=1)c=a[b],c.e+=50,c.e>=z.errorTimeout&&c.s.onerror();a.length>0&&(e=setTimeout(v,h))}function w(a,b){var c=document,d="body",e,g;if(!c[d])return q(function(){w(a,b)});g=c.createElement("script"),g.async=!0,e={f:a,m:b,e:0,s:g},f.push(e),g.onreadystatechange=g.onload=function(c){k=a,j=b,e.s.onload=e.s.onreadystatechange=null,e.s.onerror=null,f.splice(f.indexOf(e),1)},g.onerror=function(a){throw e.s.onload=e.s.onreadystatechange=null,e.s.onerror=null,f.splice(f.indexOf(e),1),Error(e.m+" failed to load. Attempted to load from file: "+e.f)},g.src=a,c[d].appendChild(g)}function x(a){d.push(a);for(var b=0;b<a.f.length;b+=1)return i?require(a.f[b]):w(a.f[b],a.m[b]);e=setTimeout(v,h)}function y(a,b,c){a=a||"",c=c||!1;var d=l,e;if(a&&!n(a)&&!o(a)){var f=a.split(z.separator);for(e=0;e<f.length;e+=1){if(!d[f[e]]){if(!b)return!1;d[f[e]]={}}d=d[f[e]]}}else{if(a==="")return!1;d=a}if(c)for(var g in c)d[g]=c[g];return d}"use strict",Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){if(!!this.length&&this instanceof Array&&arguments.length>=1){b=b||0;if(b<this.length){while(b<this.length){if(this[b]===a)return b;b++}return-1}return-1}return-1});var b=[],c,d=[],e,f=[],g=[],h=500,i=typeof window=="undefined",j=null,k="",l={},z={};return z.errorTimeout=2e4,z.rootPath="",z.fileSuffix="",z.separator="/",z.configure=function(a){a=a||{},z.rootPath=a.rootPath||z.rootPath,z.rootPath=z.rootPath.lastIndexOf("/")===z.rootPath.length-1?z.rootPath:z.rootPath+"/",z.separator=a.separator||z.separator,z.fileSuffix=a.fileSuffix||z.fileSuffix;if(a.paths)for(var b=0;b<a.paths.length;b++){var d=a.paths[b];z.provides(d.file,d.modules)}c=!0},z.define=function(a,b,c){var d=Array.prototype.concat.call(arguments,[]);d.length==1?(c=d[0],a=null):m(d[0])?(a=null,b=d[0],c=d[1]):d.length==2&&(c=d[1]),b=b||[],a=a||j;if(b.length>0){for(var e=b.length;e>=0;e--){var f=b[e];b[e]=t(f,f.charAt(0)==="."?s(k):null)}return z.require(b,function(){z.define(a,c.apply(z,arguments))})}var g=a.split(z.separator),h=g.splice(0,g.length-1).join(z.separator);a=g[0];var i={};return i[a]=c,y(h,!0,i)},z.get=function(a){if(!m(a))return y(a,!1);var b=[];for(var c=0;c<a.length;c++)b.push(z.get(a[c]));return b},z.getURL=function(a){if(b[a])return b[a];var c=a.indexOf("*")>-1;a=c?a.replace(".*",""):a;var d=z.rootPath+a.replace(RegExp("\\"+z.separator,"g"),"/")+(c?"":".js")+(z.fileSuffix?"?"+z.fileSuffix:"");return d},z.provides=function(a,c){c=p(c);for(var d=0;d<c.length;d+=1)b[c[d]]=a},z.require=function(b,d){c||z.configure(),b=p(b);var e=[],f=[];for(var h=0;h<b.length;h++){var i=b[h],j=z.getURL(i);f.push(i),g.indexOf(j)<0&&!z.get(i)&&(e.push(j),g.push(j))}if(e.length>0){var k={f:e,m:f,cb:d};q(function(){x(k)})}else d&&d.apply(a,z.get(b))},i&&(module.exports=z),a.define=z.define,a.require=z.require,z})(this);

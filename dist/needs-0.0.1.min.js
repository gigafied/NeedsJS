/*
 * needs.js v0.0.1
 * http://minion.org
 *
 * (c) 2012, Taka Kojima (taka@gigafied.com)
 * Licensed under the MIT License
 *
 * Date: Wed Feb 22 02:21:12 2012 -0800
 */
 (function(a){function k(a){return a instanceof Array}function l(a){return typeof a=="object"}function m(a){return typeof a=="function"}function n(a){return k(a)?a:[a]}function o(a){return setTimeout(a,0)}function p(a){a=a.replace(/(?:^|[^\.])(\.\/)/g,"/");var b="";while(b!==a)b=a,a=a.replace(/([\w,\-]*[\/]{1,})([\.]{2,}\/)/g,"/");return a=a.replace(/(\/{2,})/g,"/"),a}function q(a){return a.substr(a.lastIndexOf("/")+1)}function r(a){return a?a.substr(0,a.lastIndexOf("/")):a}function s(a,b){return b=b||C.rootPath,p(b+"/"+a)}function t(){var b,c,d,f,g;f={};for(b=0;b<e.length;b++){g=!0,f=e[b];for(c=f.m.length-1;c>=0;c--)if(!y(f.m[c])){g=!1;break}g&&(e.splice(b,1),f.cb&&(f.cb.apply(a,y(f.m)),f.cb=null))}}function u(){var a=g,b,c;for(b=0;b<a.length;b++)c=a[b],c.e+=h,c.e>=C.errorTimeout&&c.s.onerror();a.length>0&&setTimeout(u,h)}function v(a,b,c){function h(){f.onload=f.onreadystatechange=null,f.onerror=null,g.splice(g.indexOf(e),1)}c=c||0;var d=document,e,f;if(!d.body||c){setTimeout(function(){v(a,b)},c);return}f=d.createElement("script"),f.async=!0,e={f:a,m:b,e:0,s:f},g.push(e),f.onreadystatechange=f.onload=function(c){function d(){i={i:b,p:a}}h(),i?d():o(d)},f.onerror=function(c){throw h(),Error(b+" failed to load. Attempted to load from file: "+a)},f.src=a,(d.head||d.body).appendChild(f)}function w(a){e.push(a);for(var b=0;b<a.f.length;b++)d?(i={p:a.f[b],i:a.m[b]},C(a.f[b])):f.indexOf(a.f[b])<0&&(f.push(a.f[b]),v(a.f[b],a.m[b],(b+1)*5));setTimeout(u,h)}function x(a,b,c){a=a||"",c=c||!1;var d=j,e;if(a&&!l(a)&&!m(a)){var f=a.split("/");for(e=0;e<f.length;e++){if(!d[f[e]]){if(!b)return!1;d[f[e]]={}}d=d[f[e]]}}else{if(a==="")return!1;d=a}if(c)for(var g in c)d[g]=c[g];return d}"use strict",Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){if(!!this.length&&this instanceof Array&&arguments.length>=1){b=b||0;if(b<this.length){while(b<this.length){if(this[b]===a)return b;b++}return-1}return-1}return-1});var b,c=[],d=typeof window=="undefined",e=[],f=[],g=[],h=500,i=null,j={},y=function(a){if(!k(a))return x(a,!1);var b=[];for(var c=0;c<a.length;c++)b[c]=y(a[c]);return b},z=function(a){return c[a]?c[a]:a.indexOf("*")>-1?a.replace("/*",""):a+".js"+C.fileSuffix},A=function(a,b){b=n(b);for(var d=0;d<b.length;d++)c[b[d]]=a},B=function(){function e(){if(!a&&!i){o(e);return}var f=i?i.i:null,g=i?i.p:null;i=null,b=b||[],a=a||f;if(b.length>0){C(b,function(){B(a,c,null,Array.prototype.slice.call(arguments,0))},g);return}m(c)&&(c=c.apply(c,d[3]||[]));var h={};h[q(a)]=c,x(r(a),!0,h),t()}var a,b,c,d=Array.prototype.slice.call(arguments,0);if(d.length===1)c=d[0];else if(d.length===2||d[2]===null)c=d[1],k(d[0])?b=d[0]:(a=d[0],c=d[1]);else{if(d.length!==3)throw Error("Invalid call to define(), expected 3 arguments, got "+d.length);a=d[0],b=d[1],c=d[2]}e()},C=function(c,d,e){b||C.configure(),c=n(c);var f=[],g=[],h=[],i=!0;for(var j=0;j<c.length;j++){var k=s(c[j],r(e)),l=y(k);if(!l){i=!1;var m=z(k);g.push(k),f.push(m)}else h.push(l)}if(!i){var p={f:f,m:g,cb:d};o(function(){w(p)});return}d.apply(a,h)};C.errorTimeout=1e4,C.rootPath="",C.fileSuffix="",C.configure=function(a){a=a||{},C.rootPath=a.rootPath||C.rootPath,C.rootPath=C.rootPath.lastIndexOf("/")===C.rootPath.length-1?C.rootPath:C.rootPath+"/",C.fileSuffix="?"+a.fileSuffix||C.fileSuffix;if(a.paths)for(var c=0;c<a.paths.length;c++){var d=a.paths[c];A(d.file,d.modules)}b=!0},d&&(module.exports={require:C,define:B}),a.require&&C.configure(a.require),a.define=B,a.require=C})(this);

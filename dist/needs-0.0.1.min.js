/*
 * needs.js v0.0.1
 * http://minion.org
 *
 * (c) 2012, Taka Kojima (taka@gigafied.com)
 * Licensed under the MIT License
 *
 * Date: Wed Feb 22 23:25:07 2012 -0800
 */
 (function(){function k(a){return a instanceof Array}function l(a){return k(a)?a:[a]}function m(a){a=a.replace(/(?:^|[^\.])(\.\/)/g,"/");var b="";while(b!==a)b=a,a=a.replace(/([\w,\-]*[\/]{1,})([\.]{2,}\/)/g,"/");return a=a.replace(/(\/{2,})/g,"/"),a=a.charAt(0)==="/"?a.substr(1):a,a}function n(a){return a?a.substr(0,a.lastIndexOf("/")):a}function o(a,b){return m((b||g)+"/"+a)}function p(b,c,d,e,f){for(b=0;b<a.length;b++){f=!0,e=a[b];for(c=e.m.length-1;c>=0;c--)if(!t(e.m[c])){f=!1;break}f&&(a.splice(b,1),b--,e.cb&&e.cb.apply(j,t(e.m)))}}function q(a,c,d,f){e||(e=document.head||document.getElementsByTagName("head")[0]),d=document.createElement("script"),d.async=!0,d.src=a,d.onreadystatechange=d.onload=function(){d.onload=d.onreadystatechange=d.onerror=null,b.length>0&&(f=b.splice(b.length-1,1)[0],f.unshift(c),v.apply(j,f))},d.onerror=function(b){throw d.onload=d.onreadystatechange=d.onerror=null,Error(a+" failed to load.")},e.insertBefore(d,e.firstChild)}function r(b,d,e,f){a.push(b);for(d=0;d<b.f.length;d++)e=b.f[d],f=b.m[d],e&&!c[e]&&(c[e]=1,q(e,f));p()}function s(a,b,c,e,g,h,i){if(a==="require")return w;if(a==="module")return{id:f||"",url:u(f),exports:{}};if(a==="exports")return s("module").exports;c=d,h=a.split("/");for(e=0,g=h.length;e<g;e++){i=h[e];if(!c[i]){if(!b)return!1;c[i]=e===g-1?b:{}}c=c[i]}return c.exports||c}"use strict";var a=[],b=[],c={},d={},e,f=null,g="",h="",i={},j=typeof window!="undefined"?window:module.exports,t=function(a,b){if(!k(a))return s(a);var c=[];for(b=0;b<a.length;b++)c[b]=t(a[b]);return c},u=function(a){if(!a)return"";a=a.indexOf("*")>-1?a.replace("/*",""):a+".js"+h;for(var b in i)a=a.replace(RegExp("(^"+b+")","g"),i[b]);return a},v=function(){var a,c,d,e,g,h=Array.prototype.slice.call(arguments,0);if(h.length===1)d=h[0];else if(h.length===2||h[2]===null)d=h[1],k(h[0])?c=h[0]:(a=h[0],d=h[1]);else{if(h.length!==3)throw Error("Invalid call to define()");a=h[0],c=h[1],d=h[2]}if(!a){b.push(h);return}f=a,c=c||[];if(c.length>0){w(c,function(){v(a,d,null,arguments)},a),f=null;return}typeof d=="function"&&(g=t("module"),d=d.apply(d,h[3]?h[3]:d.length>0?[w,g,g.exports]:[])||g),s(a,d),f=null,p()};v.amd={};var w=function(a,b,c){if(!b)return typeof a=="object"?w.configure(a):t(a);a=l(a);var d,e,f,g,h,i=[],k=[],m=[];for(d=0;d<a.length;d++)e=o(a[d],n(c)),f=t(e),f?(m.push(f),i.push("")):(g=u(e),i.push(g)),k.push(e);if(i.length>m.length){r({f:i,m:k,cb:b});return}b.apply(j,m)};w.configure=function(a){a=a||{},g=a.rootPath||g,h=a.fileSuffix?"?"+a.fileSuffix:h;for(var b in a.paths)i[b]=a.paths[b]},w.toUrl=function(a){return o(a,f)},j.require&&w.config(j.require),w.modules=d,j.define=j.define||v,j.require=j.require||w})();
